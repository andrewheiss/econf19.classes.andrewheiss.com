---
title: "Capitalism"
date: "2019-08-29"
citeproc: false
bibliography: ../../static/bib/references.bib
csl: ../../static/bib/chicago-syllabus-no-bib.csl
output:
  blogdown::html_page:
    template: ../../pandoc/toc-title_html.template
    toc: true
editor_options: 
  chunk_output_type: console
---

# Slides

[Download the slides from today's class](/slides/PMAP-8141_2019-08-29.pdf).

<figure>
[![First slide](/images/slides/slides_2019-08-29.png)](/slides/PMAP-8141_2019-08-29.pdf)
</figure>


# Pit market results

```{r get-data-from-google, include=FALSE, eval=FALSE}
library(tidyverse)
library(googlesheets)
library(here)

gs_key("1nPxPb-mztT3wz9C8Rb8YmdkaVndqlVSNas9P1ubBX7k", 
       verbose = FALSE) %>%
  gs_read_csv() %>% 
  write_csv(here("static", "data", "pit_market.csv"))
```

Here are the supply and demand curves for paper clips. With no taxation, the equilibrium price should be \$6; with tax, it is \$6.50, borne equally by buyers and sellers.

```{r pit-market-supply-demand, echo=FALSE, warning=FALSE, message=FALSE}
library(tidyverse)
library(here)

source(here("lib", "graphics.R"))

# 7
supply <- c(3, 4, 5, 5, 7, 8)
demand <- c(10, 9, 8, 7, 5, 4)

supply_demand <- tibble(Supply = supply,
                        Demand = demand) %>% 
  mutate(`Supply (taxed)` = Supply + 1) %>% 
  mutate(x = 1:n()) %>% 
  gather(key, value, -x)

ggplot(supply_demand, aes(x = x, y = value, color = key)) +
  geom_line(size = 1.5) +
  geom_point(size = 3) +
  labs(x = "Quantity", y = "Price",
       title = "Supply, demand, and price for paper clips",
       caption = "PMAP 8141, Georgia State University, August 2019") +
  scale_color_manual(values = c("red", "black", "grey50"),
                     name = NULL) +
  scale_y_continuous(labels = scales::dollar) +
  theme_econ() + 
  theme(axis.text.x = element_blank(),
        legend.position = "bottom")
```

And here's how you did!

```{r plot-pit-market, echo=FALSE, warning=FALSE, message=FALSE}
market_raw <- read_csv(here("static", "data", "pit_market.csv"))

pairs <- supply_demand %>% 
  count(key) %>% 
  slice(1) %>% 
  pull(n)

n_rounds <- market_raw %>% 
  count(Round) %>% 
  pull(n)

market <- market_raw %>%
  mutate(Round = paste("Round", Round),
         # Round_long = ifelse(Rules == "Regular", Round, paste0(Round, "\n", Rules)),
         Pairs = pairs) %>%
  mutate(Round_long = Round) %>% 
  mutate(`Consumer surplus` = `Buyer number` - Price,
         `Producer surplus` = Price - `Seller number`) %>%
  group_by(Round) %>%
  mutate(index = 1:n())

avg_prices <- market %>% 
  group_by(Round_long) %>%
  summarize(avg_price = mean(Price))

efficiency <- market %>%
  group_by(Round_long) %>%
  mutate(num_trades = n(),
         efficiency = num_trades / Pairs) %>%
  slice(n()) %>%
  mutate(efficiency = scales::percent(efficiency))

ggplot(market, aes(x = index, y = Price, color = Round_long)) +
  geom_line(size = 1.5) +
  geom_point(size = 3) +
  geom_hline(data = avg_prices, aes(yintercept = avg_price), color = nord_red,
             linetype = "dashed", size = 0.5) +
  geom_label(data = efficiency, aes(x = 1, y = 3, label = efficiency), 
             inherit.aes = FALSE, hjust = "left", size = 3) +
  coord_cartesian(ylim = c(2, 10)) +
  scale_y_continuous(labels = scales::dollar, breaks = seq(2, 10, 2)) +
  scale_x_continuous(breaks = NULL) +
  scale_color_manual(values = c(nord_dk_blue, nord_yellow, nord_green,
                                nord_red, nord_purple, nord_orange, nord_lt_blue)) +
  labs(x = NULL, title = paste0("Results of ", n_rounds, " simulation rounds"),
       subtitle = "Dashed line shows average price;\nbox shows market efficiency, or how many people made a trade",
       caption = "PMAP 8141, Georgia State University, August 2019") +
  guides(color = FALSE) +
  theme_econ() +
  theme(panel.grid.minor = element_blank(),
        strip.text = element_text(vjust = 1)) +
  facet_wrap(~ Round_long, scales = "free_x")
```


# Economic indicators

- [<i class="fas fa-chart-line"></i> GDP (nominal)](https://fred.stlouisfed.org/series/GDP)
- [<i class="fas fa-chart-line"></i> GDP deflator](https://fred.stlouisfed.org/series/GDPDEF)
- [<i class="fas fa-chart-line"></i> CPI](https://fred.stlouisfed.org/series/CPIAUCSL)
- [<i class="fas fa-chart-line"></i> Personal income (nominal)](https://fred.stlouisfed.org/series/PINCOME)
- [<i class="fas fa-chart-line"></i> Population](https://fred.stlouisfed.org/series/POPTOTUSA647NWDB)
- [<i class="fas fa-chart-line"></i> Personal income per capita (nominal)](https://fred.stlouisfed.org/series/A792RC0A052NBEA)
- [<i class="fas fa-chart-line"></i> Health expenditures per capita (nominal)](https://fred.stlouisfed.org/series/HLTHSCPCHCSA)


# Fun with math and Excel

Here's what we'll do:

- Convert nominal values to real values
- Rescale the CPI to a different year
- Calculate inflation rate
- Calculate average inflation over time
- Compounding inflation

Download this file:

- [<i class="fas fa-file-excel"></i> `fred_cpi.xlsx`](/data/fred_cpi.xlsx)

Also, [according to the US Census](https://www.census.gov/construction/nrs/pdf/uspricemon.pdf), the median home price in 1990 was \$125,000. In 2018, it was \$329,600.

- What was the nominal percent change in housing prices?
- What was the real percent change in housing prices?
- What was the average yearly rate of change in housing prices?

## Nominal to real

Converting nominal values (the numbers written down at the time) to real values (the numbers in today's / another year's dollars):

$$
\text{Real value} = \frac{\text{Nominal value}}{\text{Price index / 100}}
$$

## Shifting CPI

Shifting the price index to a different year:

$$
\text{Price index}_{\text{new year}} = \frac{\text{Price index}_{\text{current year}}}{\text{Price index}_{\text{new year}}} \times 100
$$

## Inflation rate

[^no] The inflation rate is the percent change in CPI between two periods. The formula for percent change is fairly simpleâ€”just remember NOO!

[^no]: {-}
  ![Luke screaming no](https://media.giphy.com/media/QxHzTRigoD9HG/giphy.gif)

$$
\text{% change} = \frac{\text{New} - \text{Old}}{\text{Old}}
$$

or

$$
\text{% change} = \frac{\text{Current} - \text{Previous}}{\text{Previous}}
$$

*Pay attention* to the time periods in data from FRED.^[Or anywhere, really.] Datasets like [GDP](https://fred.stlouisfed.org/series/GDP) are reported quarterly, while the [CPI](https://fred.stlouisfed.org/series/CPIAUCSL) is monthly. If you need to calculate the annual change (or annual inflation), make sure you either (1) use the same month or quarter as your current and previous times (i.e. January 2016 and January 2017), or (2) add all the percent changes within the year (i.e. add the rates from January 2016, April 2016, July 2017, and October 2017).

## Compounding inflation

The compound average inflation rate is the percent that if the CPI had grown at that rate, compounded, from the start year to the end year, the same CPI would occur in the end year. To calculate this, use the formula for compounding interest, where $A$ is the CPI or price at the end of time period we're concerned about, $P$ the CPI or price at the beginning of the time period we're concerned about, $n$ is the number of times the rate is compounded each year, $t$ is the number of years, and $r$ is the rate that you want to solve for:

$$ 
A = P (1 + \frac{r}{n})^{nt} 
$$ 

If we assume interest is compounded once a year, $n$ is 1 and can disappear. This simplifies to:

$$
\text{CPI}_{\text{new}} = \text{CPI}_{\text{old}}(1 + r)^{t}
$$

We can rearrange the formula so that $r$ is on the righthand side by dividing, exponentiating, logging, and subtracting: 

$$
r = exp(\frac{ln(\frac{\text{CPI}_{\text{new}}}{\text{CPI}_{\text{old}}})}{t}) - 1
$$

Alternatively, instead of assuming annually compounding interest, we can also assume exponential growth (or continually compounding interest), which uses the following formula (again where $A$, $P$, $r$, and $t$ are the prices in the last year, prices in the first year, the rate, and the number of years:

$$
A = Pe^{rt}
$$

Or 

$$
\text{CPI}_{\text{new}} = \text{CPI}_{\text{old}}e^{rt}
$$

We can again rearrange the formula so that $r$ is on the righthand side:

$$
r = \frac{ln(\frac{\text{CPI}_{\text{new}}}{\text{CPI}_{\text{old}}})}{t}
$$


# Clearest and muddiest things

Go to [this form](https://forms.gle/rwiMXtySjxgnqRDD9) and answer these three questions:

1. What was the muddiest thing from class today? What are you still wondering about?
2. What was the clearest thing from class today? 
3. What was the most exciting thing you learned?

I'll compile the questions and send out answers after class.
